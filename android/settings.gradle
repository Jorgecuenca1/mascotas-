pluginManagement {
    repositories {
        gradlePluginPortal()
        google()
        mavenCentral()
    }
    plugins {
        // Flutter plugin loader
        id "dev.flutter.flutter-plugin-loader" version "1.0.0"
        // Android & Kotlin
        id "com.android.application"       version "8.1.0"  apply false
        id "org.jetbrains.kotlin.android" version "1.8.22" apply false
    }
}

import java.util.Properties

// 1) Cargar flutter.sdk desde local.properties o FLUTTER_ROOT
def localProperties = new Properties()
def localPropertiesFile = rootProject.file("local.properties")
if (localPropertiesFile.exists()) {
    localProperties.load(new FileInputStream(localPropertiesFile))
}
def flutterSdkPath = localProperties.getProperty("flutter.sdk") ?: System.getenv("FLUTTER_ROOT")
assert flutterSdkPath != null, "flutter.sdk no est√° definido en local.properties ni en FLUTTER_ROOT"

// 2) Incluir el composite build de las herramientas de Flutter
includeBuild("$flutterSdkPath/packages/flutter_tools/gradle")

dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    repositories {
        google()
        mavenCentral()
    }
}

rootProject.name = "mascotas"
include ":app"
